<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Telegram login example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <meta property="type" content="article" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,200,200italic" rel="stylesheet" type="text/css" />
    <link rel="icon" href="/icon/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/telegram_style.css">
    <noscript>
        <style>
            body{
                overflow: auto !important;
            }
            body:after{
                display: none !important;
            }
            #main > .inner{
                opacity: 1.0 !important;
            }
            #main{
                opacity: 1.0 !important;
                -moz-transform: none !important;
                -webkit-transform: none !important;
                -ms-transform: none !important;
                transform: none !important;
                -moz-transition: none !important;
                -webkit-transition: none !important;
                -ms-transition: none !important;
                transition: none !important;
                -moz-filter: none !important;
                -webkit-filter: none !important;
                -ms-filter: none !important;
                filter: none !important;
            }
        </style>
    </noscript>
</head>
<body class="is-loading">
    <div id="wrapper">
        <div id="main">
            <div class="inner">
                {% if button %}
                    <script async src="https://telegram.org/js/telegram-widget.js?9"
                        data-telegram-login="{{ tg_bot_username }}"
                        data-size="large"
                        data-auth-url="/telegram/auth"
                        data-request-access="write"
                    >
                    </script>
                {% else %}
                    <div class="image">
                        <img src={{ photo_url }} />
                    </div>
                    <h1 id="name">{{ name }}</h1>
                    <hr id="line" />

                    <form id="send_telegram_message">
                        <div class="inner">
                            <div class="field">
                                <textarea name="message" placeholder="Message" maxlength="2048" required></textarea>
                            </div>
                            <div class="actions">
                                <button type="submit">Send</button>
                                <hr id="line" />
                                <button type="button" onclick="location.href='/telegram/logout';">Logout</button>
                            </div>
                        </div>
                    </form>
                {% endif %}
            </div>
        </div>
    </div>
    <script src="/js/load.js"></script>
    {% if not button %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="/js/form.submit.js"></script>
    {% endif %}
</body>
</html>